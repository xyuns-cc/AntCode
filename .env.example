# AntCode API 环境配置示例文件
# 复制此文件为 .env 并根据实际情况修改配置

# ============ 应用基本配置 ============
APP_NAME=AntCode API
APP_DESCRIPTION=AntCode API
APP_VERSION=1.3.0
DEBUG=false

# ============ 服务器配置 ============
HOST=0.0.0.0
PORT=8000

# ============ 数据库配置 ============
# SQLite (默认)
DATABASE_URL=sqlite:///./antcode.sqlite3

# PostgreSQL (可选)
# DATABASE_URL=postgresql://username:password@localhost:5432/antcode

# MySQL (可选，需要安装 pymysql 或 asyncmy)
# DATABASE_URL=mysql://root:sisui123..@10.10.254.1:3306/antcode
# DATABASE_URL=mysql+asyncmy://root:sisui123..@10.10.254.1:3306/antcode

# ============ Redis配置 ============
REDIS_URL=redis://:sisui123..@10.10.254.1:6379/0
REDIS_PASSWORD=sisui123..
REDIS_ENABLED=true
REDIS_TASK_QUEUE=spider:tasks

# ============ JWT配置 ============
# 重要：生产环境请使用强密钥！建议使用 openssl rand -hex 32 生成
JWT_SECRET_KEY=1240ab928e7032188943798dd79db93f3664bcc75c9a64b21b14ae74df701665
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# ============ 数据库连接池配置 ============
DATABASE_MIN_CONNECTIONS=5
DATABASE_MAX_CONNECTIONS=20

# ============ CORS配置 ============
# 生产环境请限制具体域名
CORS_ORIGINS=http://localhost:3000,https://yourdomain.com
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# ============ 文件上传配置 ============
MAX_FILE_SIZE=104857600
ALLOWED_FILE_TYPES=.zip,.tar.gz,.py,.txt,.json,.md,.yml,.yaml

# ============ 调度器配置 ============
SCHEDULER_TIMEZONE=Asia/Shanghai
MAX_CONCURRENT_TASKS=10
TASK_EXECUTION_TIMEOUT=3600
TASK_MAX_RETRIES=3
TASK_RETRY_DELAY=60
TASK_LOG_RETENTION_DAYS=30
TASK_LOG_MAX_SIZE=104857600

# ============ 工作目录清理配置 ============
CLEANUP_WORKSPACE_ON_COMPLETION=true
CLEANUP_WORKSPACE_MAX_AGE_HOURS=24

# ============ Worker配置 ============
WORKER_ID=AntCode-Production-Node

# ============ 默认管理员配置 ============
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123

# ============ 日志配置 ============
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ============ 安全配置 ============
# 生产环境建议启用
HTTPS_ONLY=false
SECURE_COOKIES=false

# ============ 统一缓存配置 ============
# 缓存类型：redis 或 memory
# redis: 使用Redis缓存（推荐生产环境）
# memory: 使用内存缓存（适合开发环境或单机部署）
CACHE_TYPE=redis

# 全局缓存开关
CACHE_ENABLED=true

# 缓存策略配置
# true: 双层缓存（Redis+内存备份，高可用）
# false: 单层缓存（严格按CACHE_TYPE使用）
CACHE_FALLBACK_TO_MEMORY=true

# 缓存时间配置（秒）
CACHE_DEFAULT_TTL=300
METRICS_CACHE_TTL=30
USERS_CACHE_TTL=300
API_CACHE_TTL=300
QUERY_CACHE_TTL=300

# 系统指标后台更新
METRICS_BACKGROUND_UPDATE=true
METRICS_UPDATE_INTERVAL=15

# ============ 邮件配置（可选） ============
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=true
FROM_EMAIL=noreply@yourdomain.com
